<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Malva Pudding • Cook Family Recipes</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="icon" href="Icon.jpg" type="image/jpeg">
  <link rel="apple-touch-icon" href="Icon.jpg">
</head>
<body>
  <div class="container">
    <div class="recipe-header">
      <header>
        <a href="Cook Family Recipes.html" class="brand">
          <img src="Icon.jpg" class="logo" alt="Cook Family Recipes logo">
          <div>
            <div class="brand-title">Cook Family Recipes</div>
            <div class="brand-sub">Malva Pudding</div>
          </div>
        </a>
        <nav aria-label="Main navigation">
          <a href="Cook Family Recipes.html">Home</a>
          <a href="recipes.html">Recipes</a>
          <a href="categories.html">Categories</a>
          <a href="portfolio.html">Portfolio</a>
          <a href="about.html">About</a>
        </nav>
      </header>
    </div>

    <button class="back-link btn" onclick="location.href='recipes.html'" type="button">← Back to recipes</button>

    <div class="recipe-content">
      <h1 class="page-title">Malva Pudding</h1>
      <div class="recipe-info">
        <div class="meta">
          <div class="time-info">
            <span><i class="icon-clock"></i>Prep: 20 minutes</span>
            <span><i class="icon-cook"></i>Cook: 45 minutes</span>
            <span><i class="icon-total"></i>Total: 65 minutes</span>
          </div>
          <div class="recipe-details">
            <span><i class="icon-difficulty"></i>Easy</span>
            <span><i class="icon-cuisine"></i>Various</span>
          </div>
        </div>
        <div class="tags"></div>
        <div class="nutrition-info">
          <h4>Nutrition (per serving)</h4>
          <div class="nutrition-grid">
            <div><span>Calories</span><strong>N/A</strong></div>
            <div><span>Protein</span><strong>N/A</strong></div>
            <div><span>Carbs</span><strong>N/A</strong></div>
            <div><span>Fat</span><strong>N/A</strong></div>
            <div><span>Fiber</span><strong>N/A</strong></div>
          </div>
        </div>
      </div>
      <div class="content">
        <p></p>
        <div class="servings-control">
          <label for="servings">Servings:</label>
          <button type="button" class="adjust-servings" data-adjust="-1">−</button>
          <input type="number" id="servings" value="8" min="1" max="24" data-original="8">
          <button type="button" class="adjust-servings" data-adjust="1">+</button>
        </div>
        <h2>Ingredients</h2>
        <ul class="ingredients-list" data-original-servings="8">
          <h4>Pudding</h4>
          <li>1 tbsp butter room temperature</li>
          <li>1 cup brown sugar</li>
          <li>4 tbsp apricot jam</li>
          <li>1 large egg</li>
          <li>1 cup milk</li>
          <li>2 tbsp vinegar</li>
          <li>2 tsp vanilla essence</li>
          <li>1 cup all-purpose flour</li>
          <li>1 tsp baking soda</li>
          <h4>Sauce</h4>
          <li>2 tbsp butter</li>
          <li>125 ml cream</li>
          <li>4 tbsp brown sugar</li>
          <li>2 tbsp water</li>
        </ul>
        <h2>Steps</h2>
        <h3>Pudding</h3>
        <ol><li>Preheat the oven to 180°C (350°F). Ovens are temperamental, so if you know yours needs a bit more (or less) of a push, feel free to adjust.</li>
          <li>In a large mixing bowl add your first 4 ingredients - butter, sugar, jam and egg. Beat until it lightens and gets a bit fluffier. If you only have a fork, the fluffy part isn’t make-or-break.</li>
          <li>In a large measuring cup or a bowl, add milk, then vinegar and vanilla essence. Whisk lightly.</li>
          <li>In another measuring cup/bowl, add bicarb to flour and give it a quick stir.</li>
          <li>Alternating between the milk mixture and the flour, add to the large mixing bow! and mix well as you go along.</li>
          <li>Pour into a lightly greased oven-proof dish or bread tin</li>
          <li>Bake for 45 minutes, or until a knife comes out with spongy crumbs stuck to it (it's not likely to come out clean) rather than uncooked batter. The pudding will stay in its mold and rest for a bit once the sauce is poured over.</li>
          </ol>
          <ol>
          <h3>Sauce</h3>
          <li>Add all sauce ingredients together in a pot and bring to a boil.</li>
          <li>Let it simmer, stirring constantly, for 3 minutes. This time will give the sauce a richer, deeper taste.</li>
          <li>Stab the pudding a few times with a fork to help the sauce sink in so that it doesn’t pool at the sides and soak in only there. Then pour the sauce over slowly, being sure you're not leaving any part dry.</li>
        </ol>
      </div>
    </div>

    <footer>© <span id="year"></span> Cook Family Recipes</footer>
  </div>
  <script>

    document.getElementById('year').textContent = new Date().getFullYear();
    
    // Recipe scaling functionality
    function parseAmount(str) {
      if (!str) return 0;
      const parts = str.trim().split(' ');
      let total = 0;
      
      parts.forEach(part => {
        if (part.includes('/')) {
          const [num, denom] = part.split('/');
          if (!isNaN(num) && !isNaN(denom) && denom !== '0') {
            total += Number(num) / Number(denom);
          }
        } else {
          const num = Number(part);
          if (!isNaN(num)) {
            total += num;
          }
        }
      });
      
      return total;
    }

    function formatAmount(value) {
      if (value === 0) return '0';
      
      // Convert to the nearest fraction (1/4, 1/3, 1/2, 2/3, 3/4)
      const whole = Math.floor(value);
      const decimal = value - whole;
      
      // Common fractions mapping
      const fractions = {
        0.25: '1/4',
        0.33: '1/3',
        0.5: '1/2',
        0.67: '2/3',
        0.75: '3/4'
      };
      
      // Find the closest fraction
      let closestFraction = '';
      let minDiff = 1;
      
      for (const [frac, str] of Object.entries(fractions)) {
        const diff = Math.abs(decimal - Number(frac));
        if (diff < minDiff) {
          minDiff = diff;
          closestFraction = str;
        }
      }
      
      // If the decimal part is very small, ignore it
      if (minDiff > 0.15) {
        return whole || '0';
      }
      
      return whole ? `${whole} ${closestFraction}` : closestFraction;
      
      // Convert decimal to fraction
      let fraction = '';
      if (decimal > 0) {
        if (Math.abs(decimal - 0.25) < 0.01) fraction = '1/4';
        else if (Math.abs(decimal - 0.5) < 0.01) fraction = '1/2';
        else if (Math.abs(decimal - 0.75) < 0.01) fraction = '3/4';
        else fraction = decimal.toFixed(2);
      }
      
      // Combine whole number and fraction
      if (whole === 0) return fraction;
      if (fraction) return `${whole} ${fraction}`;
      return whole.toString();
    }

    function updateIngredients(newServings) {
      const list = document.querySelector('.ingredients-list');
      const originalServings = parseInt(list.dataset.originalServings);
      const scale = newServings / originalServings;
      
      // Get all ingredients and update quantities
      const items = list.querySelectorAll('li');
      items.forEach(item => {
        // Store original text if not already stored
        if (!item.dataset.original) {
          item.dataset.original = item.textContent;
        }
        
        const text = item.dataset.original;
        // Match leading numbers and fractions, handling various formats
        const match = text.match(/^([0-9]+(?:\s+[0-9]+\/[0-9]+)?|[0-9]+\/[0-9]+)\s/);
        
        if (match) {
          const originalAmount = match[0].trim();
          const originalValue = parseAmount(originalAmount);
          const scaledValue = originalValue * scale;
          const formattedValue = formatAmount(scaledValue);
          
          // Replace only the leading amount in the text
          item.textContent = text.replace(originalAmount, formattedValue);
        }
      });
    }

    // Set up event listeners for servings controls
    const servingsInput = document.getElementById('servings');
    const adjustButtons = document.querySelectorAll('.adjust-servings');

    if (servingsInput) {
      // Handle direct input changes
      servingsInput.addEventListener('input', (e) => {
        let newValue = parseInt(e.target.value);
        if (!newValue || newValue < 1) newValue = 1;
        if (newValue > 24) newValue = 24;
        e.target.value = newValue;
        updateIngredients(newValue);
      });

      // Handle increment/decrement buttons
      adjustButtons.forEach(button => {
        button.addEventListener('click', () => {
          const adjustment = parseInt(button.dataset.adjust);
          let newValue = parseInt(servingsInput.value) + adjustment;
          
          if (newValue < 1) newValue = 1;
          if (newValue > 24) newValue = 24;
          servingsInput.value = newValue;
          updateIngredients(newValue);
        });
      });
    }

  </script>
</body>
</html>