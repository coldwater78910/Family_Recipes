<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Portfolio • Cook Family Recipes</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="icon" href="Icon.jpg" type="image/jpeg">
  <link rel="apple-touch-icon" href="Icon.jpg">
</head>
<body>
  <div class="container">
    <header>
      <a href="Cook Family Recipes.html" class="brand">
        <img src="Icon.jpg" class="logo" alt="Cook Family Recipes logo">
        <div>
          <div class="brand-title">Cook Family Recipes</div>
          <div class="brand-sub">Portfolio</div>
        </div>
      </a>
      <nav aria-label="Main navigation">
        <a href="Cook Family Recipes.html">Home</a>
        <a href="recipes.html">Recipes</a>
        <a href="categories.html">Categories</a>
        <a href="portfolio.html">Portfolio</a>
        <a href="about.html">About</a>
      </nav>
    </header>

    <h1 style="margin-top:22px">Portfolio</h1>
    <p class="small-muted">A visual collection of recipe photos. Click a card to open the recipe.</p>

    <div id="portfolio" class="portfolio-list" style="margin-top:16px">
      <!-- Items will be rendered by recipes-data.js -->
    </div>

    <footer>© <span id="year"></span>&nbsp;Cook Family Recipes</footer>
  </div>

  <script src="recipes-data.js"></script>
  <script src="recipes-slug-map.js"></script>
  <script>
    document.getElementById('year').textContent = new Date().getFullYear();
    (function(){
      try{
        const container = document.getElementById('portfolio');
        const list = (window.RECIPES || []);
        if(!container) return;
        if(!list.length){ container.innerHTML = '<p style="color:var(--muted)">No photos available.</p>'; return; }
        container.innerHTML = '';
        list.forEach(r=>{
          const slugMap = (window.SLUG_MAP || {});
          const staticPage = slugMap[r.title];
          const href = staticPage ? staticPage : `recipe.html?title=${encodeURIComponent(r.title)}`;
          const el = document.createElement('a');
          el.className = 'portfolio-item';
          el.href = href;
          // Extract total time from r.time
          let totalTime = r.time;
          if (r.time && r.time.includes('Total:')) {
            const match = r.time.match(/Total:\s*([^;]+)/);
            if (match) totalTime = match[1].trim();
          }
          el.innerHTML = `
            <div class="portfolio-thumb" role="img" aria-label="${r.title}" style="background-image:url('${r.img}')"></div>
            <div class="portfolio-caption">
              <div class="card-title">${r.title}</div>
              <div class="small-muted">
                <span><strong>${totalTime || ''}</strong></span><br>
                <span>${r.difficulty ? `<strong>Difficulty:</strong> ${r.difficulty}` : ''}</span>
              </div>
              <div class="small-muted" style="margin-top:4px;">${(r.desc||'').slice(0,100)}</div>
            </div>
          `;
          container.appendChild(el);
        });
      }catch(e){ console.warn('portfolio: render failed', e); }
    })();
  </script>
  <script src="js/auth-config.js"></script>
  <script src="js/auth.js"></script>
</body>
</html>
